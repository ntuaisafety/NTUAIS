{{ $disableImageOptimization := .Site.Params.disableImageOptimization | default false }}

{{/* Linear-Inspired Hero Section */}}
<article class="hero-linear">

  {{/* Main content container - LEFT ALIGNED */}}
  <div class="relative z-10 w-full max-w-6xl mx-auto px-6 md:px-12 pt-24 pb-20 md:pt-28 md:pb-24">

    {{/* Section Badge */}}
    <div class="animate-blur-reveal">
      <span class="section-badge section-badge--green">AI Safety Research</span>
    </div>

    {{/* Main Headline - LEFT ALIGNED, BRIGHT WHITE */}}
    <h1 class="linear-headline animate-blur-reveal delay-100">
      {{ .Site.Params.Author.name | default .Site.Title }}
    </h1>

    {{/* Tagline with Typewriter Effect */}}
    {{ with .Site.Params.Author.headline }}
    <h2 class="linear-subheadline animate-blur-reveal delay-200 max-w-2xl">
      {{ if $.Site.Params.homepage.typewriter.enabled }}
      <span id="typewriter"></span><span class="cursor">{{ $.Site.Params.homepage.typewriter.cursor | default "|"
        }}</span>
      <script>
        const texts = {{ $.Site.Params.homepage.typewriter.texts }};
        const speed = {{ $.Site.Params.homepage.typewriter.speed | default 50 }};
        let textIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        const typeWriterElement = document.getElementById("typewriter");

        function type() {
          const currentText = texts[textIndex];
          if (isDeleting) {
            typeWriterElement.textContent = currentText.substring(0, charIndex - 1);
            charIndex--;
          } else {
            typeWriterElement.textContent = currentText.substring(0, charIndex + 1);
            charIndex++;
          }

          if (!isDeleting && charIndex === currentText.length) {
            isDeleting = true;
            setTimeout(type, 2500);
          } else if (isDeleting && charIndex === 0) {
            isDeleting = false;
            textIndex = (textIndex + 1) % texts.length;
            setTimeout(type, 400);
          } else {
            setTimeout(type, isDeleting ? speed / 2 : speed);
          }
        }

        document.addEventListener("DOMContentLoaded", function () {
          setTimeout(type, 500);
        });
      </script>
      {{ else }}
      {{ . | markdownify }}
      {{ end }}
    </h2>
    {{ end }}

    {{/* CTA Buttons - Linear Style */}}
    <div class="flex flex-wrap gap-3 animate-blur-reveal delay-300">
      {{ with .Site.Params.homepage.button }}
      {{ if .enable }}
      <a href="{{ .url | relURL }}" class="btn-linear btn-linear-primary">
        {{ .text }}
      </a>
      {{ end }}
      {{ end }}
      {{ with .Site.Params.homepage.secondaryButton }}
      {{ if .enable }}
      <a href="{{ .url | relURL }}" class="btn-linear btn-linear-secondary">
        {{ .text }}
      </a>
      {{ end }}
      {{ end }}
    </div>

    {{/* Social Links */}}
    {{ with .Site.Params.Author.links }}
    <div class="mt-8 flex flex-wrap gap-4 animate-blur-reveal delay-400">
      {{ range $links := . }}
      {{ range $name, $url := $links }}
      <a class="text-[#9CA3AF] hover:text-white transition-colors duration-200" href="{{ $url }}" target="_blank"
        aria-label="{{ $name | title }}" title="{{ $name | title }}" rel="me noopener noreferrer">
        {{ partial "icon.html" $name }}
      </a>
      {{ end }}
      {{ end }}
    </div>
    {{ end }}

  </div>

</article>

{{/* FAQ / About Us Section */}}
{{ partial "components/faq-accordion.html" . }}

{{/* Upcoming Programs Section - 2026 Highlight */}}
<section class="content-section py-24 relative overflow-hidden" style="background-color: transparent;">
  {{/* Background ambient glow - Using inline styles for assured rendering */}}
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-1/2 left-1/4 w-96 h-96 rounded-full"
      style="background-color: rgba(111, 182, 164, 0.10); filter: blur(100px);"></div>
    <div class="absolute top-1/2 right-1/4 w-96 h-96 rounded-full"
      style="background-color: rgba(47, 105, 92, 0.14); filter: blur(100px);"></div>
  </div>

  <div class="max-w-5xl mx-auto px-6 md:px-12 relative z-10">

    {{/* Section Header */}}
    <div class="mb-12">
      <span class="section-badge section-badge--blue">Events</span>
      <h2 class="section-heading">Upcoming 2026 Programs</h2>
      <p class="section-description">
        Applications opening soon for our Spring 2026 tracks.
      </p>
    </div>

    {{/* Programs Grid */}}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {{ $upcomingEvents := where .Site.RegularPages "Section" "events" }}
      {{ $upcomingEvents = where $upcomingEvents "Date" "ge" now }}
      {{ $upcomingEvents = $upcomingEvents.ByDate }}

      {{ range $upcomingEvents }}
      {{ partial "components/program-card.html" . }}
      {{ else }}
      {{/* Fallback if no upcoming events */}}
      <div class="col-span-1 md:col-span-2 text-center py-12 border border-neutral-800 rounded-2xl bg-[#0d1117]/50">
        <p class="text-neutral-400 text-lg">More events coming soon.</p>
        <p class="text-neutral-500 text-sm mt-2">Join our Discord to stay updated.</p>
      </div>
      {{ end }}
    </div>

  </div>
</section>

{{/* Sponsors & Collaborators Section */}}
<section class="content-section py-16">
  <div class="max-w-6xl mx-auto px-6 md:px-12">

    {{/* Collaborators */}}
    <div class="mb-16">
      <p class="logo-wall-label">Collaborated with</p>
      <div class="logo-wall">
        <div class="logo-item" style="display:flex; justify-content:center; align-items:center;">
          <img class="logo-img" src="{{ `img/members/ntu_logo.png` | absURL }}" alt="National Taiwan University"
            style="max-height: 48px; width: auto;" />
        </div>
      </div>
    </div>

  </div>
</section>

{{/* Content from _index.md */}}
{{ if .Content }}
<section class="content-section py-16">
  <div class="max-w-4xl mx-auto px-6">
    <div class="prose prose-invert prose-lg mx-auto">
      {{ .Content }}
    </div>
  </div>
</section>
{{ end }}

{{/* Recent articles */}}
<section class="content-section pb-20">
  {{ partial "recent-articles/main.html" . }}
</section>
