{{ $disableImageOptimization := .Site.Params.disableImageOptimization | default false }}

{{/* Linear-Inspired Hero Section */}}
<article class="hero-linear">

  {{/* Main content container - LEFT ALIGNED */}}
  <div class="relative z-10 w-full max-w-6xl mx-auto px-6 md:px-12 py-32">

    {{/* Optional: Logo/Author Image */}}
    {{ with .Site.Params.Author.image }}
    {{ $authorImage := "" }}
    {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
    {{ $authorImage = resources.GetRemote . }}
    {{ else }}
    {{ $authorImage = resources.Get . }}
    {{ end }}
    {{ if $authorImage }}
    {{ $final := $authorImage }}
    {{ if not (or $disableImageOptimization (eq $authorImage.MediaType.SubType "svg")) }}
    {{ $final = $authorImage.Fill "288x288 q96" }}
    {{ end }}
    <img class="mb-8 h-16 w-16 rounded-xl animate-blur-reveal" width="64" height="64"
      alt="{{ $.Site.Params.Author.name | default `Logo` }}" src="{{ $final.RelPermalink }}">
    {{ end }}
    {{ end }}

    {{/* Main Headline - LEFT ALIGNED */}}
    <h1 class="linear-headline animate-blur-reveal delay-100">
      {{ .Site.Params.Author.name | default .Site.Title }}
    </h1>

    {{/* Tagline with Typewriter Effect */}}
    {{ with .Site.Params.Author.headline }}
    <h2 class="linear-subheadline animate-blur-reveal delay-200 max-w-2xl">
      {{ if $.Site.Params.homepage.typewriter.enabled }}
      <span id="typewriter"></span><span class="cursor">{{ $.Site.Params.homepage.typewriter.cursor | default "|"
        }}</span>
      <script>
        const texts = {{ $.Site.Params.homepage.typewriter.texts }};
        const speed = {{ $.Site.Params.homepage.typewriter.speed | default 60 }};
        let textIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        const typeWriterElement = document.getElementById("typewriter");

        function type() {
          const currentText = texts[textIndex];
          if (isDeleting) {
            typeWriterElement.textContent = currentText.substring(0, charIndex - 1);
            charIndex--;
          } else {
            typeWriterElement.textContent = currentText.substring(0, charIndex + 1);
            charIndex++;
          }

          if (!isDeleting && charIndex === currentText.length) {
            isDeleting = true;
            setTimeout(type, 2500);
          } else if (isDeleting && charIndex === 0) {
            isDeleting = false;
            textIndex = (textIndex + 1) % texts.length;
            setTimeout(type, 400);
          } else {
            setTimeout(type, isDeleting ? speed / 2 : speed);
          }
        }

        document.addEventListener("DOMContentLoaded", function () {
          setTimeout(type, 600);
        });
      </script>
      {{ else }}
      {{ . | markdownify }}
      {{ end }}
    </h2>
    {{ end }}

    {{/* CTA Buttons - Linear Style (8px radius) */}}
    <div class="flex flex-wrap gap-3 animate-blur-reveal delay-300">
      {{ with .Site.Params.homepage.button }}
      {{ if .enable }}
      <a href="{{ .url }}" class="btn-linear btn-linear-primary">
        {{ .text }}
      </a>
      {{ end }}
      {{ end }}
      {{ with .Site.Params.homepage.secondaryButton }}
      {{ if .enable }}
      <a href="{{ .url }}" class="btn-linear btn-linear-secondary">
        {{ .text }}
      </a>
      {{ end }}
      {{ end }}
    </div>

    {{/* Social Links */}}
    {{ with .Site.Params.Author.links }}
    <div class="mt-10 flex flex-wrap gap-4 animate-blur-reveal delay-400">
      {{ range $links := . }}
      {{ range $name, $url := $links }}
      <a class="text-[#8A8F98] hover:text-white transition-colors duration-200" href="{{ $url }}" target="_blank"
        aria-label="{{ $name | title }}" title="{{ $name | title }}" rel="me noopener noreferrer">
        {{ partial "icon.html" $name }}
      </a>
      {{ end }}
      {{ end }}
    </div>
    {{ end }}

  </div>

</article>

{{/* Content section below hero - Scrollable */}}
<section class="content-section py-16">
  <div class="max-w-4xl mx-auto px-6">
    <div class="prose prose-invert prose-lg mx-auto">
      {{ .Content }}
    </div>
  </div>
</section>

{{/* Recent articles */}}
<section class="content-section">
  {{ partial "recent-articles/main.html" . }}
</section>