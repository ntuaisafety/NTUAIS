{{ define "main" }}
<main class="content-section py-12">
    <div class="max-w-5xl mx-auto px-6 md:px-12">

        {{/* Page Header */}}
        <header class="mb-12">
            <h1 class="linear-headline mb-4">{{ .Title }}</h1>
            {{ with .Description }}
            <p class="linear-subheadline">{{ . }}</p>
            {{ end }}
            {{ with .Content }}
            <div class="prose prose-invert mt-4">{{ . }}</div>
            {{ end }}
        </header>

        {{/* Get current date for comparison */}}
        {{ $now := now }}

        {{/* Separate upcoming and past events */}}
        {{ $upcoming := where .Pages "Date" "ge" $now }}
        {{ $past := where .Pages "Date" "lt" $now }}

        {{/* Upcoming Events Section */}}
        {{ if $upcoming }}
        <section class="mb-16">
            <h2 class="section-heading mb-6">{{ i18n "events_upcoming" }}</h2>
            <div class="events-grid">
                {{ range $upcoming.ByDate.Reverse }}
                <article class="card-base event-card event-card--upcoming">
                    <div class="event-card-content">
                        <span class="event-badge event-badge--upcoming">Upcoming</span>
                        <h3 class="event-card-title">
                            <a href="{{ .Permalink }}">{{ .Title }}</a>
                        </h3>
                        <p class="event-card-date">{{ .Date.Format "January 2, 2006" }}</p>
                        {{ with .Summary }}
                        <p class="event-card-summary">{{ . }}</p>
                        {{ end }}
                    </div>
                </article>
                {{ end }}
            </div>
        </section>
        {{ end }}

        {{/* Past Events Section */}}
        {{ if $past }}
        <section>
            <h2 class="section-heading mb-6">{{ i18n "events_past" }}</h2>
            <div class="events-grid">
                {{ range $past.ByDate.Reverse }}
                <article class="card-base event-card event-card--past">
                    <div class="event-card-content">
                        <span class="event-badge event-badge--past">Completed</span>
                        <h3 class="event-card-title">
                            <a href="{{ .Permalink }}">{{ .Title }}</a>
                        </h3>
                        <p class="event-card-date">{{ .Date.Format "January 2006" }}</p>
                        {{ with .Summary }}
                        <p class="event-card-summary">{{ . }}</p>
                        {{ end }}
                    </div>
                </article>
                {{ end }}
            </div>
        </section>
        {{ end }}

    </div>
</main>
{{ end }}