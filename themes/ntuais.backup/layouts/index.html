{{ define "main" }}
<section class="hero">
  <div class="container">
    <div class="hero-content">
      <h1 class="hero-title">{{ .Site.Params.heroTitle | default "Welcome to NTUAIS" }}</h1>
      <p class="hero-subtitle">{{ .Site.Params.heroSubtitle | default "National Taiwan University AI Safety Group" }}
      </p>
      <div class="hero-cta">
        <a href="{{ " about/" | relURL }}" class="btn btn-primary">Learn More</a>
        <a href="{{ " projects/" | relURL }}" class="btn btn-secondary">Our Projects</a>
      </div>
    </div>
  </div>
</section>

{{ with .Site.Params.features }}
<section class="features">
  <div class="container">
    <h2 class="section-title">What We Do</h2>
    <div class="features-grid">
      {{ range . }}
      <div class="feature-card">
        <div class="feature-icon">{{ .icon }}</div>
        <h3>{{ .title }}</h3>
        <p>{{ .description }}</p>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

{{ $recentPosts := where .Site.RegularPages "Section" "blog" | first 3 }}
{{ if $recentPosts }}
<section class="recent-posts">
  <div class="container">
    <h2 class="section-title">Latest Updates</h2>
    <div class="posts-grid">
      {{ range $recentPosts }}
      <article class="post-card">
        <div class="post-meta">
          <time datetime="{{ .Date.Format " 2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
        </div>
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        <p>{{ .Summary | truncate 120 }}</p>
        <a href="{{ .Permalink }}" class="read-more">Read more &rarr;</a>
      </article>
      {{ end }}
    </div>
    <div class="section-cta">
      <a href="{{ " blog/" | relURL }}" class="btn btn-secondary">View All Posts</a>
    </div>
  </div>
</section>
{{ end }}

{{ $recentProjects := where .Site.RegularPages "Section" "projects" | first 3 }}
{{ if $recentProjects }}
<section class="projects-preview">
  <div class="container">
    <h2 class="section-title">Featured Projects</h2>
    <div class="projects-grid">
      {{ range $recentProjects }}
      <article class="project-card">
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        <p>{{ .Params.description | default .Summary | truncate 150 }}</p>
        {{ with .Params.tags }}
        <div class="tags">
          {{ range . }}
          <span class="tag">{{ . }}</span>
          {{ end }}
        </div>
        {{ end }}
      </article>
      {{ end }}
    </div>
    <div class="section-cta">
      <a href="{{ " projects/" | relURL }}" class="btn btn-secondary">View All Projects</a>
    </div>
  </div>
</section>
{{ end }}
{{ end }}